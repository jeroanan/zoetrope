<div>
  <h1 ng-bind=" vm.title" />
  <div ng-show="!vm.ready" class="text-center">
    <img src="/static/img/loading.gif" />
  </div>
  <div ng-show="vm.ready">
    <h2>Filter</h2>
    <label for="selectProject">Project</label>
    <select ng-model="vm.filterProp" name="selectProject">
      <option ng-repeat="(k, v) in vm.project_name_counts" value="{{ k }}">
        {{ vm.get_project_name(k) }} ({{ v }} messages)
      </option>
    </select>

    <input type="text" ng-model="vm.filterProp" id="enterFilter" placeholder="Enter filter..." />

    <h2>Messages</h2>

    <table class="table table-striped">
      <thead>
        <th><a ng-click="vm.orderProp='message_number'; vm.reverseSort=!vm.reverseSort">#</a></th>
        <th><a ng-click="vm.orderProp='date_time'; vm.reverseSort=!vm.reverseSort">Message Date</a></th>
        <th><a ng-click="vm.orderProp='message_type'; vm.reverseSort=!vm.reverseSort">Message Type</a></th>
        <th><a ng-click="vm.orderProp='project_name'; vm.reverseSort=!vm.reverseSort">Project</a></th>
        <th><a ng-click="vm.orderProp='message_text'; vm.reverseSort=!vm.reverseSort">Message Text</a></th>
      </thead>
      <tr ng-repeat="m in vm.messages | orderBy:vm.orderProp:vm.reverseSort | filter:vm.filterProp">
        <td><span ng-bind="m.message_number" /></td>
        <td><span ng-bind="m.date_time" /></td>
        <td><span ng-bind="m.message_type" /></td>
        <td><span ng-bind="m.project_name" /></td>
        <td><span ng-bind="m.message_text" /></td>
      </tr>
    </table>
  </div>
</div>
