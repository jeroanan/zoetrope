<div>
  <h1 ng-bind=" vm.title" />
  <div ng-show="!vm.ready" class="text-center">
    <img src="/static/img/loading.gif" />
  </div>
  <div ng-show="vm.ready" class="text-center">
    <span ng-bind="vm.errorMessage" />
  </div>
  <div ng-show="vm.ready && !vm.projectFound">
	 An error occurred while loading the project. <a title="Retry" href="javascript:" ng-click="vm.load();">Retry</a>
  </div>
  
  <div ng-show="vm.ready && vm.projectFound">	 
	 <div class="container">
		<div class="col-xs-9 col-lg-11">
		  <a ng-href="/#/projectdetail/{{vm.project.name}}">Project Details</a> 
		  
		  <h2>Current Status</h2>
		  
		  <keyvallinkrow key="URL" link="{{vm.project.master_url}}" text="{{vm.project.master_url}}" />
		  <keyvalrow key="Username" val="{{ vm.project.user_name }}" />
		  <keyvalrow key="Team name" val="{{ vm.project.team_name }}" />
		  <keyvalrow key="Attached via account manager?" val="{{ vm.project.attached_via_account_manager }}" />
		  <keyvalrow key="Ended" val="{{ vm.project.ended }}" />
		  <keyvalrow key="Suspended via GUI?" val="{{ vm.project.suspended_via_gui }}" />
		  <keyvalrow key="Don't request more work" val="{{ vm.project.dont_request_more_work }}" />
		  <keyvalrow key="Detach project when all workunits done" val="{{ vm.project.detach_when_done }}" />
		  <keyvalrow key="Disk usage" val="{{ vm.project.disk_usage }}" />
		  <keyvalrow key="Resource share" val="{{ vm.project.resource_share }}" />
		  
		  <h2>Credit</h2>
		  
		  <keyvalrow key="User total credit" val="{{ vm.project.user_total_credit }}" />
		  <keyvalrow key="User recent average credit" val="{{ vm.project.user_expavg_credit }}" />
		  <keyvalrow key="Total credit for this host" val="{{ vm.project.host_total_credit }}" />
		  <keyvalrow key="Recent average credit for this host" val="{{ vm.project.host_expavg_credit }}" />
		  
		  <h2>Additional</h2>
		  
		  <div id="project-additional">
			 <keyvalrow key="NRPC failures" val="{{ vm.project.nrpc_failures }}" />
			 <keyvalrow key="Master fetch failures" val="{{ vm.project.master_fetch_failures }}" />
			 <keyvalrow key="Master fetch pending?" val="{{ vm.project.master_fetch_pending }}" />
			 <keyvalrow key="Scheduler RPC pending?" val="{{ vm.project.scheduler_rpc_pending }}" />
			 <keyvalrow key="Trickle upload pending?" val="{{ vm.project.trickle_upload_pending }}" />
			 <keyvalrow key="Last RPC" val="{{ vm.project.last_rpc }}" />
			 <keyvalrow key="Project files downloaded" val="{{ vm.project.project_files_downloaded }}" />
			 
			 <div class="row">
				<div class="col-xs-3"></div>
				<div class="col-xs-3"></div>
				<div class="col-xs-3">&nbsp;</div>
				<div class="col-xs-3"></div>
			 </div>
		  </div>	 
		  
		  
		  <h2>Statistics</h2>
		  
		  <div class="row">
			 <table class="table table-striped">
				<thead>
				  <th>
					 <a ng-click="vm.statsSort('day');">Day</a>
					 <span ng-show="vm.statsSortField==='day' && vm.statsReverseSort===false" ng-bind-html="vm.upArrow" />
					 <span ng-show="vm.statsSortField==='day' && vm.statsReverseSort===true" ng-bind-html="vm.downArrow" />
				  </th>
				  <th>
					 <a ng-click="vm.statsSort('user_total_credit');">User Total Credit</a>
					 <span ng-show="vm.statsSortField==='user_total_credit' && vm.statsReverseSort===false" ng-bind-html="vm.upArrow" />
					 <span ng-show="vm.statsSortField==='user_total_credit' && vm.statsReverseSort===true" ng-bind-html="vm.downArrow" />
				  </th>
				  <th>
					 <a ng-click="vm.statsSort('user_expavg_credit');">User Recent Average Credit</a>
					 <span ng-show="vm.statsSortField==='user_expavg_credit' && vm.statsReverseSort===false" ng-bind-html="vm.upArrow" />
					 <span ng-show="vm.statsSortField==='user_expavg_credit' && vm.statsReverseSort===true" ng-bind-html="vm.downArrow" />
				  </th>
				  <th>
					 <a ng-click="vm.statsSort('host_total_credit');">Host Total Credit</a>
					 <span ng-show="vm.statsSortField==='host_total_credit' && vm.statsReverseSort===false" ng-bind-html="vm.upArrow" />
					 <span ng-show="vm.statsSortField==='host_total_credit' && vm.statsReverseSort===true" ng-bind-html="vm.downArrow" />
				  </th>
				  <th>
					 <a ng-click="vm.statsSort('host_expavg_credit');">Host Recent Average Credit</a>
					 <span ng-show="vm.statsSortField==='host_expavg_credit' && vm.statsReverseSort===false" ng-bind-html="vm.upArrow" />
					 <span ng-show="vm.statsSortField==='host_expavg_credit' && vm.statsReverseSort===true" ng-bind-html="vm.downArrow" />
				  </th>
				</thead>
				<tbody>
				  <tr ng-repeat="stat in vm.projectStats | orderBy:vm.statsSortField:vm.statsReverseSort">
					 <td><span ng-bind="stat.day"/></td>
					 <td><span ng-bind="stat.user_total_credit"/></td>
					 <td><span ng-bind="stat.user_expavg_credit"/></td>
					 <td><span ng-bind="stat.host_total_credit"/></td>
					 <td><span ng-bind="stat.host_expavg_credit"/></td>
				  </tr>
				</tbody>
			 </table>
		  </div>
		  
		  <div class="row">
			 <div class="col-xs-3"></div>
			 <div class="col-xs-3"></div>
			 <div class="col-xs-3"></div>
		  </div>
		</div> <!-- col-xs-9 -->
		<div class="col-xs-3 col-lg-1">
		  <div class="row sidebar-button-row">
			 <h4>Project Operations</h4>
		  </div>
		  <div class="row sidebar-button-row">
			 <button class="btn btn-warning sidebar-button" ng-click="vm.detachClicked()">Detach Project</button>
			 <detach-dialog projectname="{{vm.project.name}}" projecturl="{{vm.project.master_url}}" />
		  </div>
		  <div class="row sidebar-button-row">
			 <button class="btn btn-warning sidebar-button" ng-click="vm.detachWhenDoneClicked()" ng-show="!vm.project.detach_when_done">
				Detach When Done
			 </button>
			 <button class="btn btn-primary sidebar-button" ng-click="vm.dontDetachWhenDoneClicked()" ng-show="vm.project.detach_when_done">
				Don't Detach When Done
			 </button>
		  </div>
		  <div class="row sidebar-button-row">
			 <button class="btn btn-primary sidebar-button" ng-click="vm.updateProject()">Update Project</button>
		  </div>
		  <div class="row sidebar-button-row">
			 <button class="btn btn-primary sidebar-button" ng-click="vm.noMoreWorkClicked()" ng-show="!vm.project.dont_request_more_work">
				No More Work
			 </button>
			 <button class="btn btn-primary sidebar-button" ng-click="vm.allowMoreWorkClicked()" ng-show="vm.project.dont_request_more_work">
				Allow More Work
			 </button>
		  </div>
		  <div class="row sidebar-button-row">
			 <button class="btn btn-primary sidebar-button" ng-click="vm.suspendClicked()" ng-show="!vm.project.suspended_via_gui">
				Suspend Project
			 </button>
			 <button class="btn btn-primary sidebar-button" ng-click="vm.resumeClicked()" ng-show="vm.project.suspended_via_gui">
				Resume Project
			 </button>
		  </div>
		</div>
    </div> <!-- container -->
	 
  </div>  
  <div class="row home-row text-center">
    <a href="/projects">Projects</a>
  </div>
</div>
</div>
